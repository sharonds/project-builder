{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PRD (Product Requirements Document)",
  "description": "Requirements document generated by the PRD Generator Agent",
  "type": "object",
  "required": ["title", "type", "summary", "context", "requirements", "validation_plan", "estimated_features"],
  "properties": {
    "title": {
      "type": "string",
      "description": "Feature or fix title"
    },
    "type": {
      "type": "string",
      "enum": ["big_feature", "small_feature", "bug_fix"],
      "description": "Type of request"
    },
    "summary": {
      "type": "string",
      "description": "2-3 sentence overview of the feature/fix"
    },
    "context": {
      "type": "object",
      "description": "Project context affecting this feature",
      "required": ["affected_areas", "dependencies", "constraints"],
      "properties": {
        "affected_areas": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Parts of the codebase that will be modified"
        },
        "dependencies": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Existing features this depends on"
        },
        "constraints": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Constraints to respect (security, backwards compat, etc.)"
        }
      }
    },
    "requirements": {
      "type": "array",
      "description": "List of requirements with acceptance criteria",
      "items": {
        "type": "object",
        "required": ["id", "description", "acceptance_criteria"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique requirement ID (R1, R2, etc.)"
          },
          "description": {
            "type": "string",
            "description": "Clear requirement statement"
          },
          "acceptance_criteria": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Testable criteria for completion"
          }
        }
      }
    },
    "validation_plan": {
      "type": "object",
      "description": "How to validate the implementation",
      "properties": {
        "unit_tests": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Unit test files to create"
        },
        "integration_tests": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Integration test files to create"
        },
        "manual_verification": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Manual verification steps"
        }
      }
    },
    "estimated_features": {
      "type": "integer",
      "minimum": 1,
      "description": "Estimated number of features this will split into"
    }
  }
}
